<!doctype html>
<html>
    <head>
        <title> "Klick Labs light wall"</title>
        <link rel="stylesheet" href="buttons.css">
    </head>
    <body>
        <h1> Klick Labs light wall</h1>
        <button class = "button"id = "btn00" onclick = sendToWall(0,0)> </button>
        <button class = "button"id = "btn10" onclick = sendToWall(1,0)> </button>
        <button class = "button"id = "btn20" onclick = sendToWall(2,0)> </button>
        <button class = "button"id = "btn30" onclick = sendToWall(3,0)> </button>  
        <button class = "button"id = "btn40" onclick = sendToWall(4,0)> </button>
        <button class = "button"id = "btn50" onclick = sendToWall(5,0)> </button>
        <button class = "button"id = "btn60" onclick = sendToWall(6,0)> </button>  
        <br> 
        <button class = "button"id = "btn01" onclick = sendToWall(0,1)> </button>
        <button class = "button"id = "btn11" onclick = sendToWall(1,1)> </button>
        <button class = "button"id = "btn21" onclick = sendToWall(2,1)> </button>
        <button class = "button"id = "btn31" onclick = sendToWall(3,1)> </button>  
        <button class = "button"id = "btn41" onclick = sendToWall(4,1)> </button>
        <button class = "button"id = "btn51" onclick = sendToWall(5,1)> </button>
        <button class = "button"id = "btn61" onclick = sendToWall(6,1)> </button>  
        <br> 
        <button class = "button"id = "btn02" onclick = sendToWall(0,2)> </button>
        <button class = "button"id = "btn12" onclick = sendToWall(1,2)> </button>
        <button class = "button"id = "btn22" onclick = sendToWall(2,2)> </button>
        <button class = "button"id = "btn32" onclick = sendToWall(3,2)> </button>  
        <button class = "button"id = "btn42" onclick = sendToWall(4,2)> </button>
        <button class = "button"id = "btn52" onclick = sendToWall(5,2)> </button>
        <button class = "button"id = "btn62" onclick = sendToWall(6,2)> </button>  
        <br> 
        <button class = "button"id = "btn03" onclick = sendToWall(0,3)></button>
        <button class = "button"id = "btn13" onclick = sendToWall(1,3)></button>
        <button class = "button"id = "btn23" onclick = sendToWall(2,3)></button>
        <button class = "button"id = "btn33" onclick = sendToWall(3,3)></button>  
        <button class = "button"id = "btn43" onclick = sendToWall(4,3)></button>
        <button class = "button"id = "btn53" onclick = sendToWall(5,3)></button>
        <button class = "button"id = "btn63" onclick = sendToWall(6,3)></button>  
        <br> 
        <button class = "button"id = "btn04" onclick = sendToWall(0,4)></button>
        <button class = "button"id = "btn14" onclick = sendToWall(1,4)></button>
        <button class = "button"id = "btn24" onclick = sendToWall(2,4)></button>
        <button class = "button"id = "btn34" onclick = sendToWall(3,4)></button>  
        <button class = "button"id = "btn44" onclick = sendToWall(4,4)></button>
        <button class = "button"id = "btn54" onclick = sendToWall(5,4)></button>
        <button class = "button"id = "btn64" onclick = sendToWall(6,4)></button>  
        <br> 
        <button class = "button"id = "btn05" onclick = sendToWall(0,5)></button>
        <button class = "button"id = "btn15" onclick = sendToWall(1,5)></button>
        <button class = "button"id = "btn25" onclick = sendToWall(2,5)></button>
        <button class = "button"id = "btn35" onclick = sendToWall(3,5)></button>  
        <button class = "button"id = "btn45" onclick = sendToWall(4,5)></button>
        <button class = "button"id = "btn55" onclick = sendToWall(5,5)></button>
        <button class = "button"id = "btn65" onclick = sendToWall(6,5)></button>  
        <br> 
        <button class = "button"id = "btn06" onclick = sendToWall(0,6)></button>
        <button class = "button"id = "btn16" onclick = sendToWall(1,6)></button>
        <button class = "button"id = "btn26" onclick = sendToWall(2,6)></button>
        <button class = "button"id = "btn36" onclick = sendToWall(3,6)></button>  
        <button class = "button"id = "btn46" onclick = sendToWall(4,6)></button>
        <button class = "button"id = "btn56" onclick = sendToWall(5,6)></button>
        <button class = "button"id = "btn66" onclick = sendToWall(6,6)></button>  
        <br> 
        <button class = "button"id = "clear" onclick = clearScreen() > clear screen</button> 
        <button class = "button"id = "pokeball" onclick = pokeball()> pokeball</button>
        <button class = "button"id = "question" onclick = questionBlock()>question Block</button>
        <form action="/action_page.php">
        R <input type="text" id = "colorR" value = "255">
          <input onchange = updateRed(this.value) type="range" id="R" value="255" min="0" max="255"><br>
        G <input type="text" id = "colorG" value = "255">
          <input onchange = updateGreen(this.value) type="range" id="G" value="255" min="0" max="255"><br>
        B <input type="text" id = "colorB" value = "255">
          <input onchange = updateBlue(this.value) type="range" id="B" value="255" min="0" max="255"><br>
          <button class = colorSample id="colorSample"></button>
        </form>
    </body>

        <script>
            document.onkeydown = function(e){
                switch(e.keyCode){
                    case 67://67 is the c keycode
                        clearScreen();
                        break;
                    case 83://83 is the s keycode
                        leds1D = twoDtoOneD(leds);
                        var json  = {array:[leds1D]}
                        var String  = "http://10.1.33.134/lightwall?led=" + JSON.stringify(json);
                        $.get(String,function(){})
                        break;
                    case 82://82 is the r hotkey
                        leds = oneDtotwoD(7,leds1D);
                        updateWebsiteScreen();
                        break;
                }
            }
            var leds1D;
            var leds = [[{X:0,Y:0,RGB:[0,0,0]},{X:1,Y:0,RGB:[0,0,0]},{X:2,Y:0,RGB:[0,0,0]},{X:3,Y:0,RGB:[0,0,0]},{X:4,Y:0,RGB:[0,0,0]},{X:5,Y:0,RGB:[0,0,0]},{X:6,Y:0,RGB:[0,0,0]}],
                        [{X:0,Y:1,RGB:[0,0,0]},{X:1,Y:1,RGB:[0,0,0]},{X:2,Y:1,RGB:[0,0,0]},{X:3,Y:1,RGB:[0,0,0]},{X:4,Y:1,RGB:[0,0,0]},{X:5,Y:1,RGB:[0,0,0]},{X:6,Y:1,RGB:[0,0,0]}],
                        [{X:0,Y:2,RGB:[0,0,0]},{X:1,Y:2,RGB:[0,0,0]},{X:2,Y:2,RGB:[0,0,0]},{X:3,Y:2,RGB:[0,0,0]},{X:4,Y:2,RGB:[0,0,0]},{X:5,Y:2,RGB:[0,0,0]},{X:6,Y:2,RGB:[0,0,0]}],
                        [{X:0,Y:3,RGB:[0,0,0]},{X:1,Y:3,RGB:[0,0,0]},{X:2,Y:3,RGB:[0,0,0]},{X:3,Y:3,RGB:[0,0,0]},{X:4,Y:3,RGB:[0,0,0]},{X:5,Y:3,RGB:[0,0,0]},{X:6,Y:3,RGB:[0,0,0]}],
                        [{X:0,Y:4,RGB:[0,0,0]},{X:1,Y:4,RGB:[0,0,0]},{X:2,Y:4,RGB:[0,0,0]},{X:3,Y:4,RGB:[0,0,0]},{X:4,Y:4,RGB:[0,0,0]},{X:5,Y:4,RGB:[0,0,0]},{X:6,Y:4,RGB:[0,0,0]}],
                        [{X:0,Y:5,RGB:[0,0,0]},{X:1,Y:5,RGB:[0,0,0]},{X:2,Y:5,RGB:[0,0,0]},{X:3,Y:5,RGB:[0,0,0]},{X:4,Y:5,RGB:[0,0,0]},{X:5,Y:5,RGB:[0,0,0]},{X:6,Y:5,RGB:[0,0,0]}],
                        [{X:0,Y:6,RGB:[0,0,0]},{X:1,Y:6,RGB:[0,0,0]},{X:2,Y:6,RGB:[0,0,0]},{X:3,Y:6,RGB:[0,0,0]},{X:4,Y:6,RGB:[0,0,0]},{X:5,Y:6,RGB:[0,0,0]},{X:6,Y:6,RGB:[0,0,0]}]]

            function sendToWall(X1,Y1){
                var url = json(X1,Y1);
                //console.log(leds[Y1][X1].RGB);
                $.get(url,function(){})
            }
            function json(X,Y){
                var id = "btn"+X+Y;
                var R = document.getElementById("colorR").value;
                var G = document.getElementById("colorG").value;
                var B = document.getElementById("colorB").value;
                if(leds[Y][X].RGB[0] == G && leds[Y][X].RGB[1] == R && leds[Y][X].RGB[2] == B){
                    R = 0;
                    G = 0;
                    B = 0;
                }
                leds[Y][X].RGB = [G,R,B];
                var hex = "#" + rgbToHex(R,G,B);
                document.getElementById(id).style.backgroundColor = hex;

                var light = leds[Y][X];
                var jsonObject = {array:[light]};
                var String  = "http://10.1.33.134/lightwall?led=" + JSON.stringify(jsonObject);
                return String;
            }
            function pokeball(){
                clearScreen();
                var red = [[],[2,3,4],[1,2,4,5]];
                for(i = 0; i < red.length; i++){
                    for(j = 0; j < red[i].length; j++){
                        leds[i][red[i][j]].RGB = [0,255,0];
                    }
                }
                var white = [[],[],[],[3],[1,2,4,5],[2,3,4]];
                for(i = 0; i < white.length; i++){
                    for(j = 0; j < white[i].length; j++){
                        leds[i][white[i][j]].RGB = [255,255,255];
                    }
                }                
                updateWebsiteScreen();
                var pokeballCommand = "http://10.1.33.134/lightwall?led={array:[{X:1,Y:4,RGB:[255,255,255]},%20{X:2,Y:4,RGB:[255,255,255]},%20{X:2,Y:5,RGB:[255,255,255]},%20{X:3,Y:5,RGB:[255,255,255]},%20{X:3,Y:3,RGB:[255,255,255]},%20{X:4,Y:4,RGB:[255,255,255]},%20{X:4,Y:5,RGB:[255,255,255]},%20{X:5,Y:4,RGB:[255,255,255]},%20{%20X:1,Y:2,RGB:[0,255,0]},%20{X:2,Y:1,RGB:[0,255,0]},%20{X:2,Y:2,RGB:[0,255,0]},%20{X:3,Y:1,RGB:[0,255,0]},%20{X:4,Y:1,RGB:[0,255,0]},%20{X:4,Y:2,RGB:[0,255,0]},%20{X:5,Y:2,RGB:[0,255,0]}]}";
                $.get(pokeballCommand,function(){})               
            }
            function questionBlock(){
                clearScreen();
                var yellow = [[1,2,3,4,5],[0,1,5,6],[0,1,3,5,6],[0,1,2,5,6],[0,1,2,4,5,6],[0,1,2,3,4,5,6],[1,2,4,5]];
                for(i = 0; i < yellow.length; i++){
                    for(j = 0; j < yellow[i].length; j++){
                        leds[i][yellow[i][j]].RGB = [255,255,0];
                    }
                }
                var white = [[],[2,3,4],[2,4],[3,4],[3],[],[3]];
                for(i = 0; i < white.length; i++){
                    for(j = 0; j < white[i].length; j++){
                        leds[i][white[i][j]].RGB = [255,255,255];
                    }
                }  
                updateWebsiteScreen();              
                var questionBlockCommand = "http://10.1.33.134/lightwall?led={array:[{X:0,Y:0,RGB:[0,0,0]},{X:0,Y:6,RGB:[0,0,0]},{X:6,Y:6,RGB:[0,0,0]},{X:6,Y:0,RGB:[0,0,0]},{X:3,Y:6,RGB:[255,255,255]},{X:3,Y:4,RGB:[255,255,255]},{X:3,Y:3,RGB:[255,255,255]},{X:4,Y:3,RGB:[255,255,255]},{X:4,Y:2,RGB:[255,255,255]},{X:4,Y:1,RGB:[255,255,255]},{X:3,Y:1,RGB:[255,255,255]},{X:2,Y:1,RGB:[255,255,255]},{X:2,Y:2,RGB:[255,255,255]},{X:3,Y:2,RGB:[255,255,0]},{X:3,Y:0,RGB:[255,255,0]},{X:3,Y:5,RGB:[255,255,0]},{X:2,Y:0,RGB:[255,255,0]},{X:2,Y:3,RGB:[255,255,0]},{X:2,Y:4,RGB:[255,255,0]},{X:2,Y:5,RGB:[255,255,0]},{X:2,Y:6,RGB:[255,255,0]},{X:1,Y:0,RGB:[255,255,0]},{X:1,Y:1,RGB:[255,255,0]},{X:1,Y:2,RGB:[255,255,0]},{X:1,Y:3,RGB:[255,255,0]},{X:1,Y:4,RGB:[255,255,0]},{X:1,Y:5,RGB:[255,255,0]},{X:1,Y:6,RGB:[255,255,0]},%20{X:0,Y:1,RGB:[255,255,0]},%20{X:0,Y:2,RGB:[255,255,0]},%20{X:0,Y:3,RGB:[255,255,0]},%20{X:0,Y:4,RGB:[255,255,0]},%20{X:0,Y:5,RGB:[255,255,0]},%20{X:5,Y:0,RGB:[255,255,0]},%20{X:5,Y:1,RGB:[255,255,0]},%20{X:5,Y:2,RGB:[255,255,0]},%20{X:5,Y:3,RGB:[255,255,0]},%20{X:5,Y:4,RGB:[255,255,0]},%20{X:5,Y:5,RGB:[255,255,0]},%20{X:5,Y:6,RGB:[255,255,0]},%20{X:6,Y:1,RGB:[255,255,0]},%20{X:6,Y:2,RGB:[255,255,0]},%20{X:6,Y:3,RGB:[255,255,0]},%20{X:6,Y:4,RGB:[255,255,0]},{X:6,Y:5,RGB:[255,255,0]},{X:4,Y:0,RGB:[255,255,0]}%20,{X:4,Y:4,RGB:[255,255,0]},%20{X:4,Y:5,RGB:[255,255,0]}%20,{X:4,Y:6,RGB:[255,255,0]}]}";
                $.get(questionBlockCommand,function(){});              
            } 

            function clearScreen(){
                var clear;
                for(i = 0; i < leds[0].length; i++){
                    for(j = 0; j < leds.length; j++){
                        leds[i][j].RGB = [0,0,0];
                    }
                }
                var clearCommand = "http://10.1.33.134/lightwall?led={array:[{X:0,Y:0,RGB:[0,0,0]}, {X:0,Y:1,RGB:[0,0,0]}, {X:0,Y:2,RGB:[0,0,0]}, {X:0,Y:3,RGB:[0,0,0]}, {X:0,Y:4,RGB:[0,0,0]}, {X:0,Y:5,RGB:[0,0,0]}, {X:0,Y:6,RGB:[0,0,0]}, {X:1,Y:0,RGB:[0,0,0]}, {X:1,Y:1,RGB:[0,0,0]}, {X:1,Y:2,RGB:[0,0,0]}, {X:1,Y:3,RGB:[0,0,0]}, {X:1,Y:4,RGB:[0,0,0]}, {X:1,Y:5,RGB:[0,0,0]}, {X:1,Y:6,RGB:[0,0,0]}, {X:2,Y:0,RGB:[0,0,0]}, {X:2,Y:1,RGB:[0,0,0]}, {X:2,Y:2,RGB:[0,0,0]}, {X:2,Y:3,RGB:[0,0,0]}, {X:2,Y:4,RGB:[0,0,0]}, {X:2,Y:5,RGB:[0,0,0]}, {X:2,Y:6,RGB:[0,0,0]}, {X:3,Y:0,RGB:[0,0,0]}, {X:3,Y:1,RGB:[0,0,0]}, {X:3,Y:2,RGB:[0,0,0]}, {X:3,Y:3,RGB:[0,0,0]}, {X:3,Y:4,RGB:[0,0,0]}, {X:3,Y:5,RGB:[0,0,0]}, {X:3,Y:6,RGB:[0,0,0]}, {X:4,Y:0,RGB:[0,0,0]}, {X:4,Y:1,RGB:[0,0,0]}, {X:4,Y:2,RGB:[0,0,0]}, {X:4,Y:3,RGB:[0,0,0]}, {X:4,Y:4,RGB:[0,0,0]}, {X:4,Y:5,RGB:[0,0,0]}, {X:4,Y:6,RGB:[0,0,0]}, {X:5,Y:0,RGB:[0,0,0]}, {X:5,Y:1,RGB:[0,0,0]}, {X:5,Y:2,RGB:[0,0,0]}, {X:5,Y:3,RGB:[0,0,0]}, {X:5,Y:4,RGB:[0,0,0]}, {X:5,Y:5,RGB:[0,0,0]}, {X:5,Y:6,RGB:[0,0,0]}, {X:6,Y:0,RGB:[0,0,0]}, {X:6,Y:1,RGB:[0,0,0]}, {X:6,Y:2,RGB:[0,0,0]}, {X:6,Y:3,RGB:[0,0,0]}, {X:6,Y:4,RGB:[0,0,0]}, {X:6,Y:5,RGB:[0,0,0]}, {X:6,Y:6,RGB:[0,0,0]}]}";
                $.get(clearCommand, function(msg){
                    //console.log(msg);
                })
                for(i = 0; i < 7; i++){
                    for(j = 0; j < 7; j++){
                        var id = "btn" + i + j;
                        document.getElementById(id).style.backgroundColor = "#000000";
                    }
                }  
            }
            function updateWebsiteScreen(){
                for(i = 0; i < leds[0].length; i++){
                    for(j = 0; j < leds.length; j++){
                        var R = leds[i][j].RGB[1];
                        var G = leds[i][j].RGB[0];
                        var B = leds[i][j].RGB[2];
                        var hex = "#" + rgbToHex(R,G,B);   
                        var id = "btn"+j+i;         
                        document.getElementById(id).style.backgroundColor = hex;
                    }
                }
            }
            function rgbToHex(R,G,B) {
                return toHex(R)+toHex(G)+toHex(B);
                }
            function toHex(n) {
                n = parseInt(n,10);
                if (isNaN(n)) return "00";
                n = Math.max(0,Math.min(n,255));
                return "0123456789ABCDEF".charAt((n-n%16)/16)+ "0123456789ABCDEF".charAt(n%16);
            }           
            function updateRed(red){
                document.getElementById("colorR").value = red;
                var hex = "#" + rgbToHex(document.getElementById("colorR").value,document.getElementById("colorG").value,document.getElementById("colorB").value)
                document.getElementById("colorSample").style.backgroundColor = hex;
            }
            function updateGreen(green){
                document.getElementById("colorG").value = green;
                var hex = "#" + rgbToHex(document.getElementById("colorR").value,document.getElementById("colorG").value,document.getElementById("colorB").value)
                document.getElementById("colorSample").style.backgroundColor = hex;                
            }
            function updateBlue(blue){
                document.getElementById("colorB").value = blue;
                var hex = "#" + rgbToHex(document.getElementById("colorR").value,document.getElementById("colorG").value,document.getElementById("colorB").value)
                document.getElementById("colorSample").style.backgroundColor = hex;               
            }
            function totalArrayLength(){
                var totalLength = 0;
                for(i = 0; i < leds.length; i++){
                    totalLength += leds[i].length;
                }
                return totalLength;
            }
            function twoDtoOneD(twoDArray){
                var i = 0;;
                var oneDArray; 
                for(j = 0; j < twoDArray.length; j++){
                    for(k = 0; k < twoDArray[j].lenght; k++){
                        oneDArray[i] = twoDArray[j][k];
                        i++;
                    }
                }
            }
            function oneDtotwoD(itemsperRow, oneDArray){
                var i = 0;
                var twoDArray;
                for(j = 0; j < oneDArray.length/itemsperRow; j++){
                    for(k = 0; k < itemsperRow; k++){
                        twoDArray[j][k] = oneDArray[i];
                    }
                }
                return twoDArray;
            }
        </script>   
    </body>
</html>    
<script src="jquery-3.2.1.js"></script>    